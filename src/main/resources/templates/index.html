<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	data-th-replace="~{layouts/layout :: layout-enchere(
			titrePage=~{:: title}, 
			contenuPage=~{:: main}, 
			ressourceSupp=~{:: script})}"
>
<head>
<title data-th-text="#{index.title}"></title>
<script defer src="/js/filtres.js" ></script>
</head>
<body>
	<main>
		<h1 data-th-text="#{index.h1}"></h1>
		
		<div class="filterSection">
			<h2>Filtres : </h2>
			<form data-th-action="@{/rechercher}" method="post">
			<ul>
				<li><input type="text" id="inputName" name="nomRecherche" placeholder="Le nom de l'article contient :" maxlength="30" data-th-value="${nomRecherche}"></li>
				<li><input type="submit" value="Rechercher" class="btnFilter" ></li>
			</ul>
			<ul>
				<li><label for="inputCategorie" >Catégories</label>
					<select id="inputCategorie" name="categorieRecherche" data-th-value="${categorieRecherche}">
						<option value="0">Toutes</option>
						<option data-th-each="categorie : ${categories}" data-th-text="${categorie.libelle}" data-th-value="${categorie.id}" th:selected="(${categorie.id} == ${categorieRecherche})"></option>
					</select>
				</li>
			</ul>
			<ul>
			<li><a href="/" class="btnFilter">Annuler</a></li>
			</ul>
<!-- 			<th:block data-th-if="${#authorization.expression('isAuthenticated()')}"> -->
				<input data-th-if="${#authorization.expression('isAuthenticated()')}" type="hidden" id="filtresIsAuth" name="filtresIsAuth">
				<ul id="inputRadio">
					
					<li><input type="radio" id="achats" name="buySell" value="achats" > <label for="achats">Achats</label> </li>
					<li><input type="radio" id="ventes" name="buySell" value="ventes" > <label for="ventes">Mes Ventes</label> </li>
				</ul>
				<ul id="selectsFiltres">
				<li>
				<input type="hidden" id="valeurSelect" data-th-value="${casUtilisationFiltres}" name="valeurSelect">
				<select id="selectAchats" name="casUtilisationFiltres" data-th-value="${casUtilisationFiltres}">
					<option value="0" >Enchères ouvertes</option>
					<option value="1" >Mes enchères en cours</option>
					<option value="2" >Mes enchères remportées</option>
					</select>
				</li>
				<li>
					<select id="selectVentes" name="casUtilisationFiltres" data-th-value="${casUtilisationFiltres}">
					<option value="3" >Mes ventes en cours</option>
					<option value="4">Mes ventes non débutées</option>
					<option value="5">Mes ventes terminées</option>
					</select>
				</li>
				</ul>
<!-- 				</th:block> -->
			</form>
		</div>

		<div class="listCard">
			<div data-th-if="${articlesAVendre == null}">
				<h2>Aucun article disponible avec ces critères</h2>
			</div>
			<div class="articleCard" data-th-each="article : ${articlesAVendre}">
				<h2>
				 <span data-th-if="${!#authorization.expression('isAuthenticated()')}" data-th-text="${article.nom}"></span> 
				 <a data-th-if="${#authorization.expression('isAuthenticated()')}" data-th-href="@{/encheres/detail(id=${article.id})}"><span data-th-text="${article.nom}"></span></a> 
				 </h2>
				<div class="articleCardDetails">
					<h3>
						<span data-th-text="#{index.prix}"></span> <span data-th-if="${article.prixVente != 0}"
							data-th-text="${article.prixVente}"
						></span> <span data-th-if="${article.prixVente == 0}" data-th-text="${article.prixInitial}"></span> point(s)
					</h3>
					<h3>
						<span data-th-text="#{index.fin_enchere}"></span> <span
							data-th-text="${#temporals.format(article.dateFinEncheres, 'dd/MM/yyyy')}"
						></span>
					</h3>
					<h3>
						<span data-th-text="#{index.vendeur}"></span> <span data-th-text="${article.vendeur.pseudo}"></span> 
					</h3>
				</div>
			</div>

		</div>


	</main>
</body>
</html>